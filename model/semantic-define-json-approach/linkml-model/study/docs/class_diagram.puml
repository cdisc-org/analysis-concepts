@startuml
skinparam nodesep 10
hide circle
hide empty members
class "StudyVariable" [[{Study variable definition (equivalent to ItemDef). Maps dataset variables to library DerivationConcepts and provides study-specific metadata.}]] {
    {field} OID : string  
    {field} name : string  
    {field} description : string  
    {field} label : string  
    {field} dataType : DataTypeEnum  
    {field} length : integer  
    {field} displayFormat : string  
    {field} implementsDerivationConcept : string  [0..*]
    {field} implementsBiomedicalConcept : string  [0..*]
    {field} codelistRef : string  
    {field} role : string  
    {field} mandatory : boolean  
}
class "ValueList" [[{List of permissible values for a variable.}]] {
    {field} values : string  [0..*]
    {field} codelistRef : string  
}
"StudyVariable" *--> "0..1" "ValueList" : "valueList"
class "DataStructureDefinition" [[{ADaM dataset structure definition (equivalent to ItemGroupDef). Defines the structure of an analysis dataset including variables, records, and metadata.}]] {
    {field} OID : string  
    {field} name : string  
    {field} description : string  
    {field} label : string  
    {field} domain : string  
    {field} dataClass : AdamDataClassEnum  
    {field} structure : DataStructureEnum  
    {field} purpose : string  
    {field} keys : string  [0..*]
}
"DataStructureDefinition" *--> "0..*" "StudyVariable" : "variables"
class "StudyImplementation" [[{Root container for a study's analysis implementation. References concepts from the library model and provides study-specific instantiations, variable mappings, and result structures.}]] {
    {field} studyOID : string  
    {field} studyName : string  
}
class "AnalysisOutputDataset" [[{CUBE structure for analysis results. Defines the structure of output datasets containing analysis results.}]] {
    {field} OID : string  
    {field} name : string  
    {field} description : string  
    {field} label : string  
    {field} sourceAnalyses : string  [0..*]
    {field} structure : DataStructureEnum  
}
class "StudyAnalysis" [[{Instantiated analysis for a specific study. References a library AnalysisConcept and binds its parameters to study-specific variables and populations.}]] {
    {field} analysisOID : string  
    {field} analysisName : string  
    {field} description : string  
    {field} implementsConcept : string  
    {field} composedSentence : string  
}
class "LibraryReference" [[{Reference to an external concept library. Links study implementation to library concepts via OID references.}]] {
    {field} libraryOID : string  
    {field} libraryName : string  
    {field} libraryVersion : string  
    {field} libraryURI : uri  
}
"StudyImplementation" *--> "0..*" "AnalysisOutputDataset" : "analysisOutputDatasets"
"StudyImplementation" *--> "0..*" "StudyAnalysis" : "studyAnalyses"
"StudyImplementation" *--> "0..*" "DataStructureDefinition" : "dataStructures"
"StudyImplementation" *--> "0..*" "LibraryReference" : "libraryReferences"
class "MethodExecution" [[{Specification of how a method should be executed for this analysis. References library Method and provides execution parameters.}]] {
    {field} methodRef : string  
    {field} selectedLanguage : ImplementationLanguageEnum  
    {field} executionOrder : integer  
    {field} parameters : string  
    {field} description : string  
}
class "AnalysisOutput" [[{Reference to where analysis output is located in result datasets. Maps abstract concept outputs to concrete result locations.}]] {
    {field} conceptOutputRef : string  
    {field} resultLocation : string  
    {field} displayFormat : string  
    {field} description : string  
}
class "DatasetReference" [[{Reference to dataset used in analysis.}]] {
    {field} datasetOID : string  
    {field} datasetName : string  
    {field} role : string  
    {field} description : string  
}
class "PopulationReference" [[{Reference to analysis population.}]] {
    {field} populationOID : string  
    {field} populationName : string  
    {field} description : string  
    {field} whereClause : string  
}
class "AnalysisParameterBinding" [[{Binds a building block parameter to a study-specific value. The value can be a variable reference, a literal value, or a computed expression.}]] {
    {field} buildingBlockRef : string  
    {field} parameterName : string  
    {field} boundToVariable : string  
    {field} literalValue : string  
    {field} expression : string  
    {field} description : string  
}
"StudyAnalysis" *--> "0..*" "MethodExecution" : "methodExecutions"
"StudyAnalysis" *--> "0..*" "AnalysisOutput" : "outputs"
"StudyAnalysis" *--> "0..*" "DatasetReference" : "datasetRefs"
"StudyAnalysis" *--> "0..1" "PopulationReference" : "populationRef"
"StudyAnalysis" *--> "0..*" "AnalysisParameterBinding" : "parameterBindings"
class "ResultMeasure" [[{Measure in a CUBE result structure. Defines a numeric or categorical result value.}]] {
    {field} name : string  
    {field} label : string  
    {field} dataType : DataTypeEnum  
    {field} statisticType : string  
    {field} analysisOutputRef : string  
    {field} displayFormat : string  
}
"AnalysisOutputDataset" *--> "0..*" "ResultMeasure" : "measures"
class "ResultDimension" [[{Dimension in a CUBE result structure. Defines a categorical grouping variable in the results.}]] {
    {field} name : string  
    {field} label : string  
    {field} dataType : DataTypeEnum  
    {field} codelistRef : string  
    {field} order : integer  
}
"AnalysisOutputDataset" *--> "0..*" "ResultDimension" : "dimensions"
@enduml
