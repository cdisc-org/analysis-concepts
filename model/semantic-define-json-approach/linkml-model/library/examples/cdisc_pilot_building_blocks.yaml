# CDISC Pilot Study - Building Blocks
#
# This file contains library BuildingBlock definitions used to compose the
# AnalysisConcepts for the CDISC Pilot study analyses. BuildingBlocks are
# reusable components that specify outcomes, methods, populations, and other
# analytical elements.
#
# Reference: CDISC Pilot Study, Table 14-3.01 (ADAS-Cog analyses)

libraryOID: "LIB.CDISC.PILOT.BB"
libraryName: "CDISC Pilot Building Blocks"
version: "1.0"

concepts:
  # ==========================================================================
  # Outcome Building Blocks
  # ==========================================================================

  - OID: "BB.OUTCOME.SCORE_AT_VISIT"
    name: "Assessment Score at Visit"
    conceptType: "building_block"
    semanticRole: "outcome_specification"
    label: "Score at specified visit"
    description: >-
      Specifies an assessment score measured at a particular analysis visit.
      Used for descriptive analyses where the raw score (not change) is
      the primary outcome.

    purpose: >-
      Define the outcome variable for analyses that summarize assessment
      scores at each visit without calculating change from baseline.

    parameters:
      - OID: "BB.OUTCOME.SCORE_AT_VISIT.PARAM.SCORE"
        name: "score"
        semanticRole: "outcome_variable"
        dataType: "float"
        required: true
        description: "Assessment score value"
        implementsConcept:
          - "DC.ASSESSMENT.SCORE"

      - OID: "BB.OUTCOME.SCORE_AT_VISIT.PARAM.VISIT"
        name: "visit"
        semanticRole: "temporal_selector"
        dataType: "text"
        required: true
        description: "Analysis visit identifier"

  - OID: "BB.OUTCOME.CHANGE_FROM_BASELINE_AT_VISIT"
    name: "Change from Baseline at Visit"
    conceptType: "building_block"
    semanticRole: "outcome_specification"
    label: "Change from baseline at visit"
    description: >-
      Specifies change from baseline in an assessment score at a particular
      analysis visit. This is the standard efficacy outcome for longitudinal
      studies comparing treatments on score changes over time.

    purpose: >-
      Define the dependent variable for confirmatory analyses (e.g., ANCOVA)
      where treatment effect is assessed via change from baseline.

    parameters:
      - OID: "BB.OUTCOME.CHANGE_FROM_BASELINE_AT_VISIT.PARAM.CHANGE"
        name: "change_from_baseline"
        semanticRole: "outcome_variable"
        dataType: "float"
        required: true
        description: "Change from baseline value"
        implementsConcept:
          - "DC.CHANGE.FROM.BASELINE"

      - OID: "BB.OUTCOME.CHANGE_FROM_BASELINE_AT_VISIT.PARAM.VISIT"
        name: "analysis_visit"
        semanticRole: "temporal_selector"
        dataType: "text"
        required: true
        description: "Target analysis visit (e.g., Week 24)"

  # ==========================================================================
  # Statistical Method Building Blocks
  # ==========================================================================

  - OID: "BB.METHOD.ANCOVA"
    name: "ANCOVA Model"
    conceptType: "building_block"
    semanticRole: "analysis_method_specification"
    label: "Analysis of covariance"
    description: >-
      Analysis of covariance (ANCOVA) with treatment as a categorical factor
      and specified covariates. Used for comparing treatment groups on a
      continuous outcome while adjusting for baseline and other covariates.

    purpose: >-
      Specify the use of ANCOVA for treatment comparisons with covariate
      adjustment, typically using Type III sums of squares.

    methodReferences:
      - methodOID: "METHOD.ANCOVA.TYPE3"
        semanticRole: "primary_method"
        description: "Type III ANCOVA for unbalanced designs"

    parameters:
      - OID: "BB.METHOD.ANCOVA.PARAM.TREATMENT"
        name: "treatment"
        semanticRole: "primary_predictor"
        dataType: "text"
        required: true
        description: "Treatment group (categorical factor)"

      - OID: "BB.METHOD.ANCOVA.PARAM.DEPENDENT"
        name: "dependent_variable"
        semanticRole: "dependent_variable"
        dataType: "float"
        required: true
        description: "Continuous outcome variable"

  - OID: "BB.METHOD.ANCOVA_CONTINUOUS_TREATMENT"
    name: "ANCOVA with Continuous Treatment"
    conceptType: "building_block"
    semanticRole: "analysis_method_specification"
    label: "ANCOVA with continuous predictor"
    description: >-
      Analysis of covariance (ANCOVA) with treatment modeled as a continuous
      variable (dose) rather than categorical factor. Used for testing
      dose-response relationships while adjusting for covariates.

    purpose: >-
      Specify ANCOVA for dose-response testing where treatment dose is a
      continuous predictor and the coefficient represents dose effect.

    methodReferences:
      - methodOID: "METHOD.ANCOVA.TYPE3"
        semanticRole: "primary_method"
        description: "Type III ANCOVA with continuous treatment variable"

    parameters:
      - OID: "BB.METHOD.ANCOVA_CONTINUOUS_TREATMENT.PARAM.DOSE"
        name: "treatment_dose"
        semanticRole: "primary_predictor"
        dataType: "float"
        required: true
        description: "Treatment dose as continuous variable"

      - OID: "BB.METHOD.ANCOVA_CONTINUOUS_TREATMENT.PARAM.DEPENDENT"
        name: "dependent_variable"
        semanticRole: "dependent_variable"
        dataType: "float"
        required: true
        description: "Continuous outcome variable"

  # ==========================================================================
  # Covariate Building Blocks
  # ==========================================================================

  - OID: "BB.COVARIATE.BASELINE_AND_SITE"
    name: "Baseline and Site Adjustment"
    conceptType: "building_block"
    semanticRole: "covariate_adjustment_specification"
    label: "Adjust for baseline and site"
    description: >-
      Specifies adjustment for baseline score and study site in the analysis
      model. Baseline adjustment accounts for pre-treatment differences; site
      adjustment controls for center effects in multi-site studies.

    purpose: >-
      Define the covariate structure for ANCOVA models, including both
      baseline value (continuous covariate) and site (categorical covariate).

    parameters:
      - OID: "BB.COVARIATE.BASELINE_AND_SITE.PARAM.BASELINE"
        name: "baseline_score"
        semanticRole: "baseline_covariate"
        dataType: "float"
        required: true
        description: "Baseline assessment score"
        implementsConcept:
          - "DC.BASELINE.VALUE"

      - OID: "BB.COVARIATE.BASELINE_AND_SITE.PARAM.SITE"
        name: "site"
        semanticRole: "confounding_adjuster"
        dataType: "text"
        required: true
        description: "Study site identifier"

  # ==========================================================================
  # Comparison/Test Building Blocks
  # ==========================================================================

  - OID: "BB.COMPARISON.PAIRWISE_TREATMENTS"
    name: "Pairwise Treatment Comparisons"
    conceptType: "building_block"
    semanticRole: "method_specification"
    label: "All pairwise comparisons"
    description: >-
      Specifies that all pairwise comparisons among treatment groups should
      be performed, evaluating differences in least squares means with
      confidence intervals and p-values at specified significance level.

    purpose: >-
      Define the comparison structure for ANCOVA where all treatment pairs
      are compared to identify which specific groups differ significantly.

    parameters:
      - OID: "BB.COMPARISON.PAIRWISE_TREATMENTS.PARAM.ALPHA"
        name: "significance_level"
        semanticRole: "statistical_threshold"
        dataType: "float"
        required: true
        description: "Significance level for tests (e.g., 0.05)"
        defaultValue: "0.05"

      - OID: "BB.COMPARISON.PAIRWISE_TREATMENTS.PARAM.CI_LEVEL"
        name: "confidence_level"
        semanticRole: "confidence_interval_level"
        dataType: "float"
        required: true
        description: "Confidence level for intervals (e.g., 0.95)"
        defaultValue: "0.95"

  - OID: "BB.TEST.DOSE_RESPONSE"
    name: "Dose-Response Test"
    conceptType: "building_block"
    semanticRole: "method_specification"
    label: "Test for dose-response relationship"
    description: >-
      Specifies a test for non-zero coefficient of treatment dose when
      treatment is modeled as a continuous variable. Tests for linear
      dose-response relationship without interaction terms.

    purpose: >-
      Define the hypothesis test for dose-response effect, where significant
      non-zero coefficient indicates a dose-related treatment effect.

    parameters:
      - OID: "BB.TEST.DOSE_RESPONSE.PARAM.NULL_HYPOTHESIS"
        name: "null_hypothesis"
        semanticRole: "hypothesis_specification"
        dataType: "text"
        required: true
        description: "H0: dose coefficient = 0"
        defaultValue: "coefficient = 0"

      - OID: "BB.TEST.DOSE_RESPONSE.PARAM.ALPHA"
        name: "significance_level"
        semanticRole: "statistical_threshold"
        dataType: "float"
        required: true
        description: "Significance level for test"
        defaultValue: "0.05"

  # ==========================================================================
  # Population Building Blocks
  # ==========================================================================

  - OID: "BB.POPULATION.EFFICACY"
    name: "Efficacy Population"
    conceptType: "building_block"
    semanticRole: "population_specification"
    label: "Efficacy analysis population"
    description: >-
      Specifies the efficacy analysis population, typically consisting of
      all randomized subjects who received at least one dose of study
      treatment and had at least one post-baseline efficacy assessment.
      May be equivalent to modified intent-to-treat (mITT) population.

    purpose: >-
      Define the subject population for efficacy analyses, excluding subjects
      with no treatment exposure or no post-baseline data.

    parameters:
      - OID: "BB.POPULATION.EFFICACY.PARAM.FLAG"
        name: "population_flag"
        semanticRole: "population_indicator"
        dataType: "text"
        required: true
        description: "Population flag variable (e.g., EFFFL='Y')"
        implementsConcept:
          - "DC.POPULATION.FLAG"

  # ==========================================================================
  # Imputation Building Blocks
  # ==========================================================================

  - OID: "BB.IMPUTATION.LOCF"
    name: "Last Observation Carried Forward"
    conceptType: "building_block"
    semanticRole: "method_specification"
    label: "LOCF imputation"
    description: >-
      Last Observation Carried Forward (LOCF) imputation method where missing
      values at a target visit are replaced with the last non-missing value
      observed for that subject. Conservative approach that assumes no change
      after dropout.

    purpose: >-
      Specify the use of LOCF for handling missing data in efficacy analyses,
      providing a simple sensitivity analysis under conservative assumptions.

    methodReferences:
      - methodOID: "METHOD.IMPUTATION.LOCF"
        semanticRole: "primary_method"
        description: "Last Observation Carried Forward"

    parameters:
      - OID: "BB.IMPUTATION.LOCF.PARAM.BASELINE_REQUIRED"
        name: "require_baseline"
        semanticRole: "method_constraint"
        dataType: "boolean"
        required: true
        description: "Whether baseline value must be non-missing"
        defaultValue: "true"

      - OID: "BB.IMPUTATION.LOCF.PARAM.POST_BASELINE_REQUIRED"
        name: "require_post_baseline"
        semanticRole: "method_constraint"
        dataType: "boolean"
        required: true
        description: "Whether at least one post-baseline value required"
        defaultValue: "true"
